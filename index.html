<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generatore di Lezioni con Claude Opus</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #4a4a4a;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            resize: vertical;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        button {
            flex-grow: 1;
            padding: 10px;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s;
        }
        #generate-button {
            background-color: #007bff;
        }
        #generate-button:hover:not(:disabled) {
            background-color: #0056b3;
        }
        #stop-button {
            background-color: #dc3545;
        }
        #stop-button:hover:not(:disabled) {
            background-color: #c82333;
        }
        #copy-button {
            background-color: #28a745;
            margin-top: 10px;
            display: none; /* Inizialmente nascosto */
        }
        #copy-button:hover {
            background-color: #218838;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        #response-container {
            margin-top: 20px;
            padding: 20px;
            background-color: #e9ecef;
            border-left: 5px solid #007bff;
            border-radius: 4px;
            min-height: 100px; /* Altezza minima */
            white-space: pre-wrap; /* Mantiene la formattazione */
            word-wrap: break-word; /* Evita che le parole lunghe rompano il layout */
        }
        #loading {
            display: none;
            text-align: center;
            margin-top: 10px;
            color: #6c757d;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Crea una Lezione con Claude Opus</h1>

    <p>Inserisci qui sotto l'argomento per la tua lezione di italiano.</p>

    <label for="prompt">Argomento della lezione:</label>
    <textarea id="prompt" rows="6" placeholder="Es. 'Crea una breve lezione sul passato prossimo per studenti principianti...'"></textarea>
    
    <div class="button-group">
        <button id="generate-button">Genera Lezione</button>
        <button id="stop-button" disabled>Ferma</button>
    </div>

    <div id="loading">Generazione in corso...</div>
    <div id="response-container">La risposta apparir√† qui.</div>
    
    <button id="copy-button">Copia Contenuto</button>
</div>

<script src="https://js.puter.com/v2/"></script>

<script>
    const promptInput = document.getElementById('prompt');
    const generateButton = document.getElementById('generate-button');
    const stopButton = document.getElementById('stop-button');
    const copyButton = document.getElementById('copy-button');
    const responseContainer = document.getElementById('response-container');
    const loadingDiv = document.getElementById('loading');

    let controller = null; // Controller per annullare la richiesta

    const defaultInstructions = `ISTRUZIONI COMPLETE PER LA CREAZIONE DI LEZIONI DI ITALIANO B2
## üß† RESET MEMORIA OBBLIGATORIO

**PRIMA DI CREARE OGNI LEZIONE:**
- Cancella completamente qualsiasi ricordo di versioni precedenti delle istruzioni
- Leggi ESCLUSIVAMENTE le istruzioni fornite in questa sessione
- NON fare riferimento a "contraddizioni" o "versioni diverse" che non esistono
- Se qualcosa non √® chiaro, chiedi chiarimenti specifici senza inventare problemi
- Concentrati SOLO su quello che √® effettivamente scritto nelle istruzioni correnti
- Non sovrapporre informazioni di conversazioni precedenti
- Tratta ogni richiesta di lezione come un progetto completamente nuovo

**COMPORTAMENTI DA EVITARE:**
‚ùå "Ho trovato una contraddizione" (quando non c'√®)
‚ùå "Nelle istruzioni precedenti diceva..."  
‚ùå "Mi ricordo che..."
‚ùå Creare problemi inesistenti
‚ùå Complicare istruzioni semplici e chiare

**COMPORTAMENTI CORRETTI:**
‚úÖ Leggere le istruzioni attuali con precisione
‚úÖ Seguire esattamente il template fornito    
‚úÖ Chiedere chiarimenti solo se realmente necessario
‚úÖ Focalizzarsi sui fatti scritti, non su interpretazioni

## üóÇÔ∏è VERIFICA LEZIONI IN GOOGLE DRIVE - OBBLIGATORIO

### **PRIMA di creare qualsiasi lezione:**
1. **Cerca le lezioni esistenti nella cartella:**
    \`\`\`
    Link: https://drive.google.com/drive/folders/1moRyb_5kuNpPMUhzXI7l5oZ9uA_7lR2i?usp=sharing

    Percorso: Lezioni Italiano > Lezioni per tutti > B2
    (nella cartella principale B2, NON nelle sottocartelle)
    
    Usa google_drive_search con query:
    - "Lezione" in parents della cartella B2
    - oppure: name contains 'Lezione' AND name contains 'B2'
    \`\`\`
    
2. **I file hanno questi nomi:**
    - "Lezione X ‚Äì B2" (Google Docs)
    - "Lezione X ‚Äì B2.docx" (Word)
    - Dove X = numero progressivo

3. **Analizza ogni lezione trovata per:**
    - Numero progressivo
    - Livello (A0, A1, A2, B1, ecc.)
    - Tema trattato
    - Grammatica insegnata
    - Vocabolario introdotto

4. **Determina il numero della nuova lezione:**
    - Se creazione sequenziale: usa il numero successivo all'ultima
    - Se riempimento buchi: identifica il numero mancante
    - Se lezione intermedia: usa SOLO elementi delle lezioni precedenti

üìã OVERVIEW DEL PROGETTO
Questo progetto prevede la creazione di lezioni di italiano per stranieri di livello B2 (elementare) per studenti dai 14 ai 64 anni. Ogni lezione deve essere creata come artifact di tipo code con il markdown.

üéØ FORMATO TECNICO OBBLIGATORIO
Template Base della Lezione
Formato Artifact
Tipo: application/vnd.ant.code
Language: markdown
Contenuto: DEVE apparire come codice markdown non formattato
OBBLIGATORIO: Usare ### per titoli, #### per sottosezioni, **grassetto**, ecc.
NON accettabile: Testo normale con solo simboli emoji
Esempio corretto: ### **Titolo** invece di "### Titolo"

ATTENZIONE: Ogni riga:  
- Deve seguire le regole Markdown, non solo essere dichiarata come tale
- Deve andare a capo con due spazi alla fine affinch√® non si creino blocchi di testo illeggibili

\`\`\`markdown
## **Lezione X ‚Äì B2**

‚è≥ **Durata:** 50 minuti

üßæ **Tema:** [Tema in italiano]

### **üéØ Obiettivi**

‚úÖ [Obiettivo in italiano]
‚úÖ [Obiettivo in italiano]
‚úÖ [Obiettivo in italiano]
‚úÖ [Obiettivo in italiano]
‚úÖ [Obiettivo in italiano]
\`\`\`

## üìè REQUISITI DI LUNGHEZZA E SVILUPPO

### Lunghezza Minima per Sezione
- **Sezioni standard:** 15-25 righe minimo
- **NON accettabile:** Sezioni di sole 3-4 righe
- **Ogni sezione deve includere:**
  1. Introduzione/contesto (2-3 righe)
  2. Contenuto principale (vocabolario/dialogo/spiegazione)
  3. Attivit√†/esercizio (sempre 10 items)
  4. Eventuali note o esempi aggiuntivi

### Esempi di Sviluppo Adeguato

**‚ùå TROPPO SCARNO:**
\`\`\`markdown
### 3Ô∏è‚É£ Numeri
1Ô∏è‚É£ uno
2Ô∏è‚É£ due  
üìù Esercizio: [10 frasi]
\`\`\`

‚úÖ ADEGUATAMENTE SVILUPPATO:
\`\`\`markdown
### 3Ô∏è‚É£ üî¢ I numeri da 1 a 10

üìå **Contesto:** I numeri sono fondamentali per comunicare in italiano. Li usiamo per dire l'ora, i prezzi, le quantit√† e molto altro.

#### **üìñ Vocabolario**

1Ô∏è‚É£ **uno**
2Ô∏è‚É£ **due**
3Ô∏è‚É£ **tre**
[etc...]

#### **üéØ Pronuncia**
Attenzione alla pronuncia di "tre" (rolling R) e "sette" (double T).

#### **üìù Esercizio -- Scrivi il numero in lettere**
[10 frasi complete]
\`\`\`

### **Struttura Standard delle Sezioni:**

1Ô∏è‚É£ [emoji] Titolo sezione
üìå Contesto: [Spiegazione in italiano]
üìñ Vocabolario
üîπ parola italiana
üîπ parola italiana
üîπ parola italiana
[continuare fino a 8-12 parole]
üìù Esercizio -- Tipo di esercizio
1Ô∏è‚É£ [Frase con spazio] __________.
2Ô∏è‚É£ [Frase con spazio] __________.
3Ô∏è‚É£ [Frase con spazio] __________.
4Ô∏è‚É£ [Frase con spazio] __________.
5Ô∏è‚É£ [Frase con spazio] __________.
6Ô∏è‚É£ [Frase con spazio] __________.
7Ô∏è‚É£ [Frase con spazio] __________.
8Ô∏è‚É£ [Frase con spazio] __________.
9Ô∏è‚É£ [Frase con spazio] __________.
üîü [Frase con spazio] __________.

[Ripetere per almeno 10 sezioni totali]

üè† Compiti per casa
1Ô∏è‚É£ [Primo compito in italiano]
2Ô∏è‚É£ [Secondo compito in italiano]
3Ô∏è‚É£ [Terzo compito in italiano]
4Ô∏è‚É£ [Quarto compito in italiano]

## üìê REGOLE DI FORMATTAZIONE MARKDOWN

### Gerarchie dei Titoli
- **H2 (##):** Solo per il titolo principale "Lezione X ‚Äì B2" (con grassetto)
- **H3 (###):** Per sezioni principali con **grassetto** (es: ### **üéØ Obiettivi**)
- **H4 (####):** Per sottosezioni con **grassetto** (es: #### **üìñ Vocabolario**)
- **H5 (#####):** Da evitare, usare solo se strettamente necessario

### Elementi Obbligatori
1. **Titolo:** \`## **Lezione X ‚Äì B2**\` (X = numero determinato dalla ricerca in Google Drive)
2. **Durata:** Sempre esattamente "50 minuti"
3. **Tema:** Solo in italiano
4. **Obiettivi:** Minimo 5, massimo 7, con check emoji ‚úÖ
5. **Separatori:** Usare \`---\` tra sezioni principali
6. **Numerazione sezioni:** Da 1Ô∏è‚É£ a üîü (minimo 10 sezioni)

## üé® USO DELLE EMOJI

### Emoji Obbligatorie
- ‚è≥ per durata
- üßæ per tema
- üéØ per obiettivi
- ‚úÖ per ogni obiettivo
- üìå per contesto
- üìñ per vocabolario
- üìù per esercizi scritti
- üéß per ascolto
- üé≠ per role-play
- üó£Ô∏è per speaking
- üè† per compiti
- 1Ô∏è‚É£-üîü per numerazione

### Emoji Tematiche Consigliate per Sezioni
- üëã saluti e presentazioni
- üçù cibo e cucina
- üè† casa e famiglia
- üõí shopping
- üöå trasporti
- ‚òÄÔ∏è tempo atmosferico
- üëï vestiti
- üíä salute
- üìö scuola
- üéâ eventi

## üìö STRUTTURA PEDAGOGICA

### Sezione 1 (Introduttiva) - OBBLIGATORIA
Deve sempre contenere:
1. Contesto con spiegazione chiara (minimo 2-3 frasi)
2. Vocabolario nuovo (8-12 parole)
3. Esercizio di completamento con 10 frasi numerate
4. **LUNGHEZZA MINIMA:** Ogni sezione deve essere sostanziosa (non solo titolo + esercizio)

### Sezioni 2-9 (Sviluppo) - VARIET√Ä E SOSTANZA
**‚ö†Ô∏è IMPORTANTE: Ogni sezione deve essere adeguatamente sviluppata**
- **NON accettabile:** Solo titolo + esercizio
- **Minimo richiesto:** Contesto/spiegazione + contenuto + attivit√†
- **Lunghezza indicativa:** 15-25 righe per sezione

Alternare tra:
- **Grammatica:** Spiegazioni semplici con tabelle ed esempi multipli
- **Dialoghi:** Conversazioni pratiche di almeno 6-8 battute con contesto
- **Ascolto:** Risorsa autentica con URL visibile + attivit√† pre/post ascolto
- **Lettura:** Testi di 100-120 parole con glossario + 5-10 domande comprensione
- **Dettato:** 10 frasi semplici da dettare, con focus su suoni/ortografia difficili
- **Role-play:** Situazioni pratiche con istruzioni chiare e modello completo
- **Pronuncia:** Focus su suoni difficili con almeno 10 parole esempio
- **Cultura:** Elementi di cultura italiana con spiegazioni dettagliate
- **Giochi:** Attivit√† ludiche con regole chiare e almeno 10 items

### Sezione 10 (Conclusiva) - FLESSIBILE
Pu√≤ essere:
- Ripasso generale
- Gioco finale
- Mini-progetto
- Autovalutazione

### Compiti per Casa - OBBLIGATORI
Sempre 4 compiti con:
- Numerazione emoji (1Ô∏è‚É£-4Ô∏è‚É£)
- Descrizione in italiano
- Variet√† di tipologie (scrittura, ascolto, pratica orale, ricerca)

## üéØ TIPOLOGIE DI ESERCIZI

### Esercizi con Completamento (pi√π comuni)
\`\`\`markdown
üìù **Esercizio -- Completa le frasi**
1Ô∏è‚É£ Io __________ al supermercato.
\`\`\`

### Vero o Falso
\`\`\`markdown
üìù **Esercizio -- Vero o Falso**
1Ô∏è‚É£ Maria va a scuola. [V/F]
\`\`\`

### Abbinamento
\`\`\`markdown
üìù **Esercizio -- Abbina**
Colonna A       Colonna B
1Ô∏è‚É£ Ciao         A. Saluto di sera
2Ô∏è‚É£ Buonasera    B. Saluto informale
\`\`\`

### Scelta Multipla
\`\`\`markdown
üìù **Esercizio -- Scegli la risposta corretta**
1Ô∏è‚É£ Maria _____ italiana.
    a) sono  b) √®  c) sei
\`\`\`

‚ö†Ô∏è ATTENZIONE PARTICOLARE: CONCORDANZA NEGLI ESERCIZI
### Regole di Concordanza da Verificare SEMPRE

**ARTICOLI DETERMINATIVI**
- Maschile singolare: il/lo ‚Üí aggettivo -o
- Femminile singolare: la ‚Üí aggettivo -a      
- Maschile plurale: i/gli ‚Üí aggettivo -i
- Femminile plurale: le ‚Üí aggettivo -e

**PRIMA DI CREARE OGNI ESERCIZIO**
- Identifica il genere della parola che andr√† nello spazio vuoto
- Verifica che articoli e aggettivi nella frase concordino
- Controlla sia genere che numero

### Esempi di Controllo
\`\`\`markdown
‚úÖ CORRETTO: "La __________ √® grande" (casa - femm. sing.)
‚úÖ CORRETTO: "Il __________ √® rosso" (libro - masc. sing.)
‚úÖ CORRETTO: "Le __________ sono belle" (ragazze - femm. plur.)

‚ùå SBAGLIATO: "La __________ √® alto" (ragazzo - non concorda)
‚ùå SBAGLIATO: "Il __________ sono buone" (pizze - non concorda)
‚ùå SBAGLIATO: "I __________ √® veloce" (macchina - non concorda)
\`\`\`

**VERBI DA CONTROLLARE**
- Verifica che il verbo concordi con il soggetto in numero
- Es: "Maria __________ (mangiare)" ‚Üí mangia (3¬™ sing.)
- Es: "I bambini __________ (giocare)" ‚Üí giocano (3¬™ plur.)

## üìä CONTROLLO QUALIT√Ä
### Checklist Pre-Pubblicazione

‚òê Ho cercato in Google Drive nella cartella "Lezioni Italiano > Lezioni per tutti > B2"
‚òê Ho identificato il numero progressivo corretto
‚òê Ho verificato cosa √® stato insegnato nelle lezioni precedenti
‚òê Non uso grammatica/vocabolario di lezioni successive (se intermedia)
‚òê Numero lezione progressivo corretto
‚òê Tema non ripetuto in altre lezioni
‚òê PREREQUISITI verificati (usa SOLO vocabolario/grammatica gi√† insegnati)
‚òê 10+ sezioni numerate con emoji
‚òê SEZIONI SVILUPPATE (non scarne, minimo 15-25 righe ciascuna)
‚òê Vocabolario 8-12 parole
‚òê Tutti gli esercizi hanno 10 items
‚òê CONCORDANZA verificata in OGNI esercizio (articoli, aggettivi, verbi)
‚òê Risorsa autentica con URL visibile
‚òê 4 compiti per casa
‚òê Artifact tipo application/vnd.ant.code con language="markdown"
‚òê Emoji appropriate e coerenti
‚òê OGNI RIGA scritta in vera sintassi markdown (###, ####, **, ecc.)
‚òê OGNI RIGA va a capo con due spazi alla fine
‚òê NON solo testo normale in un container markdown
‚òê URL artifact mantenuto invariato (no modifiche durante revisioni)

### Errori Comuni da Evitare

‚ùå Usare "insegnante" invece di "tutor"
‚ùå ERRORI DI CONCORDANZA (il casa, la libro, i bambino √®)
‚ùå USARE GRAMMATICA NON ANCORA INSEGNATA (es. passato in Lezione 3)
‚ùå USARE VOCABOLARIO DI LEZIONI FUTURE
‚ùå SEZIONI TROPPO SCARNE (solo titolo + esercizio senza contenuto)
‚ùå Esercizi con meno di 10 items
‚ùå Link di risorse autentiche non funzionanti
‚ùå Mescolare livelli di difficolt√†
‚ùå Ripetere temi gi√† trattati
‚ùå Formattazione markdown di tipo code inconsistente
‚ùå Mancanza di variet√† nelle attivit√†
‚ùå Non verificare genere/numero prima di creare frasi
‚ùå Sezioni senza contesto o spiegazioni adeguate

## üéì LINEE GUIDA PEDAGOGICHE

### Principi Didattici
- Progressione: Dal semplice al complesso
- Ripetizione: Riutilizzare vocabolario nelle sezioni successive
- Praticit√†: Situazioni di vita reale
- Interattivit√†: Bilanciare teoria e pratica
- Multimedialit√†: Integrare video/audio autentici

### Adattamento all'Et√† (14-64 anni)
- Temi universali e neutri
- Esempi che spaziano da scuola a lavoro
- Cultura italiana accessibile a tutti
- Evitare riferimenti troppo giovani o datati

### Livello B2 - Caratteristiche
- Frasi semplici e complesse base (soggetto-verbo-oggetto)
- Presente indicativo e passato prossimo base
- Vocabolario concreto e quotidiano espanso
- Strutture grammaticali elementari (articoli, preposizioni base)
- Massimo 120 parole per testi di lettura

## üìù ESEMPIO DI SEZIONE COMPLETA
\`\`\`markdown
### **3Ô∏è‚É£ üçù Al ristorante**

üìå **Contesto:** Impariamo a ordinare cibo in un ristorante italiano. Conoscere le espressioni base per ordinare √® molto importante quando si viaggia in Italia.

#### **üìñ Vocabolario**

üçù **pasta** üçï **pizza** üíß **acqua** üç∑ **vino** ü•ó **insalata** üç∞ **dolce** üßæ **menu** üí∞ **conto** #### **üí¨ Dialogo**

üë§ **Cameriere:** Buongiorno, cosa desidera?      
üë§ **Cliente:** Vorrei una pizza margherita, per favore.      
üë§ **Cameriere:** Da bere?      
üë§ **Cliente:** Un'acqua naturale, grazie.      

#### **üìù Esercizio -- Completa il dialogo**

1Ô∏è‚É£ Cameriere: Buongiorno, cosa __________?      
2Ô∏è‚É£ Cliente: __________ una pasta al pomodoro.      
3Ô∏è‚É£ Cameriere: Da __________?      
4Ô∏è‚É£ Cliente: Un __________ rosso, grazie.      
5Ô∏è‚É£ Cameriere: __________ subito!      
6Ô∏è‚É£ Cliente: Posso avere il __________?      
7Ô∏è‚É£ Cameriere: Sono 15 __________.      
8Ô∏è‚É£ Cliente: Ecco a __________.      
9Ô∏è‚É£ Cameriere: __________ e arrivederci!      
üîü Cliente: __________, buona giornata!      
\`\`\`

## üöÄ ISTRUZIONI FINALI PER L'IA

**PRIMA DI INIZIARE:**
- Controlla SEMPRE le lezioni esistenti per evitare duplicati
- Identifica quali argomenti grammaticali e vocabolario sono gi√† stati insegnati
- Pianifica esercizi usando SOLO elementi gi√† conosciuti dagli studenti

**CREA SEMPRE:** Un artifact in formato Markdown di tipo code
**SEGUI ESATTAMENTE:** Il template e le regole di formattazione
**VERIFICA:**
- Che tutti i link siano con URL visibile
- Che NON usi grammatica/vocabolario non ancora insegnati
- Che articoli/aggettivi/verbi concordino correttamente

**MANTIENI:** Coerenza stilistica con le lezioni esistenti
**RICORDA:** Il target √® B2 - elementare
**USA:** Il termine "tutor" mai "insegnante"
**INCLUDI:** Sempre elementi culturali italiani autentici
**PRESERVA:** L'URL dell'artifact senza modificarlo

## üìå PROMEMORIA GOOGLE DRIVE
Quando l'utente richiede una lezione, se non specifica il numero:
1. Cerca SEMPRE prima in Google Drive nella cartella "Lezioni Italiano > Lezioni per tutti > B2"
2. I file si chiamano "Lezione X ‚Äì B2" o "Lezione X ‚Äì B2.docx"
3. Identifica automaticamente il numero da assegnare
4. Informa l'utente: "Ho trovato le Lezioni 1-5, creer√≤ la Lezione 6"

**NOTA FINALE:** Queste istruzioni sono complete e dettagliate per permettere a qualsiasi IA di creare lezioni nel formato corretto. Seguile attentamente per garantire coerenza e qualit√† nel progetto.`;

    const handleGenerate = async () => {
        const userPrompt = promptInput.value;
        if (!userPrompt) {
            alert('Per favore, inserisci un argomento per la lezione.');
            return;
        }
        
        // Unisci le istruzioni predefinite con il prompt dell'utente
        const completePrompt = defaultInstructions + '\n\n' + userPrompt;

        // Imposta lo stato dei pulsanti e del display
        generateButton.disabled = true;
        stopButton.disabled = false;
        copyButton.style.display = 'none';
        loadingDiv.style.display = 'block';
        responseContainer.textContent = '';
        
        controller = new AbortController();

        try {
            const response = await puter.ai.chat(completePrompt, {
                model: 'openrouter:anthropic/claude-opus-4',
                stream: true,
                signal: controller.signal // Passa il segnale di annullamento
            });

            for await (const part of response) {
                if (part && part.text) {
                    responseContainer.textContent += part.text;
                }
            }
        } catch (error) {
            if (error.name === 'AbortError') {
                responseContainer.textContent += '\n\nGenerazione interrotta.';
            } else {
                console.error('Errore durante la generazione:', error);
                responseContainer.textContent = 'Si √® verificato un errore. Per favore, riprova.';
            }
        } finally {
            // Ripristina lo stato dei pulsanti e del display
            generateButton.disabled = false;
            stopButton.disabled = true;
            loadingDiv.style.display = 'none';
            if (responseContainer.textContent.trim() !== '') {
                copyButton.style.display = 'block';
            }
        }
    };

    const handleCopy = async () => {
        try {
            await navigator.clipboard.writeText(responseContainer.textContent);
            const originalText = copyButton.textContent;
            copyButton.textContent = 'Copiato!';
            setTimeout(() => {
                copyButton.textContent = originalText;
            }, 2000);
        } catch (err) {
            console.error('Errore nella copia del testo:', err);
            alert('Impossibile copiare il testo. Controlla che il browser lo supporti.');
        }
    };

    const handleStop = () => {
        if (controller) {
            controller.abort();
        }
    };

    generateButton.addEventListener('click', handleGenerate);
    stopButton.addEventListener('click', handleStop);
    copyButton.addEventListener('click', handleCopy);
</script>

</body>
</html>
